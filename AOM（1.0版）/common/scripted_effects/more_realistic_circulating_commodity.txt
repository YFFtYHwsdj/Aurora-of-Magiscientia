cc_trade_center_startup = {
    every_scope_state = {
        if = {
            limit = {
                NOT = { has_building = building_domestic_trade_center }
            }
            create_building = {
                building = "building_domestic_trade_center"
                level = 1
                reserves = 1
            }
        }
    }
}

cc_trade_center_spreading = {
    every_scope_state = {
        # 本地贸易中心的升级
        if = {
            limit = {
                # market_access < 1
                any_scope_building = {
                    is_building_type = building_domestic_trade_center
                    cash_reserves_available > 5000
                    weekly_profit > 0
                }
            }
            start_building_construction = building_domestic_trade_center
        }
        else_if = {
            limit = {
                any_scope_building = {
                    is_building_type = building_domestic_trade_center
                    cash_ratio < 0.5
                    weekly_profit <= 0
                }
            }
        }

        # 本地贸易中心在国内的渗透
        if = {
            limit = {
                any_scope_building = {
                    is_building_type = building_domestic_trade_center
                    weekly_profit > 0
                }
            }
            random_neighbouring_state = {
                limit = {
                    NOT = { has_building = building_domestic_trade_center }
                    # market_access < 1
                    OR = {
                        owner = ROOT
                        owner = {
                            OR = {
                                has_diplomatic_pact = {
                                    who = ROOT
                                    type = puppet
                                } 
                                has_diplomatic_pact = {
                                    who = ROOT
                                    type = domain
                                }
                                has_diplomatic_pact = {
                                    who = ROOT
                                    type = customs_union
                                }
                            }
                        } 
                    }
                }     
                create_building = {
                    building = "building_domestic_trade_center"
                    level = 1
                    reserves = 1
                }
            }
            if = {
                limit = {
                    any_scope_building = {
                        is_building_type = building_domestic_trade_center
                        cash_reserves_available > 10000
                    }
                }
                random_neighbouring_state = { 
                    limit = {
                        has_building = building_domestic_trade_center
                        # market_access < 1
                        OR = {
                            owner = ROOT
                            owner = {
                                OR = {
                                    has_diplomatic_pact = {
                                        who = ROOT
                                        type = puppet
                                    } 
                                    has_diplomatic_pact = {
                                        who = ROOT
                                        type = domain
                                    }
                                    has_diplomatic_pact = {
                                        who = ROOT
                                        type = customs_union
                                    }
                                }
                            } 
                        }
                    }      
                    start_building_construction = building_domestic_trade_center 
                } 
            } 
        }
    } 
}

#自给农场与市场接入度之间的关联
cc_subsistence_output_change = {
    every_scope_state = {
        if = {
            limit = {
                # market_access >= 1
            }
            add_modifier = {
                name = cc_s_# market_access_100
                months = 1
            }
        }
        else_if = {
            limit = {
                # market_access >= 0.8
            }
            add_modifier = {
                name = cc_s_# market_access_80    
                months = 1
            }
        }
        else_if = {
            limit = {
                # market_access >= 0.6
            }
            add_modifier = {
                name = cc_s_# market_access_60
            
                months = 1}
        }
        else_if = {
            limit = {
                # market_access >= 0.4
            }
            add_modifier = {
                name = cc_s_# market_access_40
                
                months = 1
            }
        }
        else = {
            add_modifier = {
                name = cc_s_# market_access_20
                
                months = 1
            }
        }
    }
}